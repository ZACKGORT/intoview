<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>intoview ‚Ä¢ notes prototype</title>
<link rel="icon" href="data:,"/>
<style>
  /* =============================================================
     INTOVIEW ‚Ä¢ NOTES ‚Äî SINGLE-FILE PROTOTYPE
     -------------------------------------------------------------
     How to split later (your preferred workflow):
       ‚Ä¢ index.html  ‚Äì keep only the <body> markup
       ‚Ä¢ styles.css  ‚Äì everything in this <style> block
       ‚Ä¢ app.js      ‚Äì everything in the <script> block
     Then update links:
       <link rel="stylesheet" href="styles.css">
       <script src="app.js" defer></script>
     ============================================================= */

  :root{
    /* COLORS (monochrome UI) */
    --bg:#0c0c0e;            /* canvas */
    --panel:#0f1012;         /* cards */
    --ink:#e9e9ea;           /* primary text */
    --muted:#b7b7bb;         /* captions */
    --line:#ffffff;          /* 1px frame */
    --line-dim:#9a9aa0;      /* thin separators */

    /* TYPE */
    --ui: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* LAYOUT */
    --left-w: min(38vw, 560px);   /* hero column */
    --gutter: clamp(16px, 4vmin, 40px);
    --card-w: min(44vw, 720px);
    --card-min: 320px;

    /* FRAME + LABELS */
    --frame: 1px;
    --label-size: 11px;
    --label-track: .08em;
    --timestamp-size: 11px;

    /* BLUR + FADE */
    --blur-hero: 10px;   /* tagline blur */
    --tilt-blur: 8px;    /* background tilt‚Äëshift */
  }

  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body{
    margin:0; background: var(--bg); color: var(--ink);
    font: 400 14px/1.5 var(--ui);
    -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
  }

  /* ====== PAGE GRID ====== */
  .shell{ position:relative; min-height:100dvh; overflow:hidden; }
  .main{ display:grid; grid-template-columns: var(--left-w) 1fr; min-height:100dvh; }

  /* ====== LEFT PANEL (LOGO + TAGLINE) ====== */
  .left{ position:relative; padding: calc(var(--gutter) * 1.5) var(--gutter); display:flex; flex-direction:column; gap:32px; }
  .brand{ display:flex; align-items:center; gap:14px; letter-spacing:.08em; font-weight:600; }
  .tagline{ margin-top:48px; color:var(--ink); opacity:.9; font-size: clamp(18px, 3.2vw, 28px); letter-spacing:.06em; }
  .tagline span{ filter: blur(var(--blur-hero)); opacity:.9; }

  /* simple 3‚Äëcube glyph */
  .glyph{ width:36px; height:26px; display:grid; grid:auto/ auto-flow; gap:2px; }
  .cube{ width:12px; height:12px; background:linear-gradient(135deg,#e5e5e8,#9a9aa3); border-radius:2px; box-shadow: 0 1px 0 rgba(0,0,0,.45) inset; }
  .cube:nth-child(2){ opacity:.85; transform: translateY(4px); }
  .cube:nth-child(3){ opacity:.72; transform: translateY(8px); }

  /* ====== BACKGROUND PHOTO (RIGHT) ====== */
  .backdrop{ position:absolute; inset:0 0 0 var(--left-w); overflow:hidden; }
  .bg-img{ position:absolute; inset:0; background:#000 center/cover no-repeat; filter: grayscale(100%); }

  /* Tilt‚Äëshift band: less blur across a horizontal strip */
  .bg-img::before{ content:""; position:absolute; inset:0; backdrop-filter: blur(var(--tilt-blur)); }
  .bg-img::after{
    /* gradient mask removes the blur in a band through the middle */
    content:""; position:absolute; inset:0;
    backdrop-filter: none; /* cancels */
    -webkit-mask: linear-gradient(#0000, #000 22%, #000 78%, #0000);
    mask: linear-gradient(#0000, #000 22%, #000 78%, #0000);
  }

  /* ====== NOTE CARD ====== */
  .stage{ position:relative; display:flex; justify-content:center; align-items:center; padding: var(--gutter); }
  .card{ width:clamp(var(--card-min), var(--card-w), 88vw); aspect-ratio: 4 / 3; position:relative; border: var(--frame) solid var(--line); background: #0b0b0d; box-shadow: 0 8px 30px rgba(0,0,0,.55); }
  .card.square{ aspect-ratio: 1 / 1; }

  .card .hdr, .card .ftr{ position:absolute; left:0; right:0; display:flex; align-items:center; justify-content:space-between; color:#fff; }
  .card .hdr{ top:0; height:24px; border-bottom: var(--frame) solid var(--line); font: 600 var(--label-size)/1 var(--mono); letter-spacing: var(--label-track); padding:0 8px; }
  .card .ftr{ bottom:0; height:28px; border-top: var(--frame) solid var(--line); font: 500 var(--timestamp-size)/1 var(--mono); letter-spacing:.04em; padding:0 8px; }

  .label-dim{ color: #dcdcdf; opacity:.92; }
  .coords{ color:#cfd0d5; opacity:.9; font-weight:500; }

  .card .media{ position:absolute; inset:24px 0 28px; display:grid; place-items:center; overflow:hidden; }
  .card .media img{ width:100%; height:100%; object-fit:cover; filter: grayscale(100%); }
  .placeholder{ color:#8a8a90; font: 600 64px/1 var(--ui); opacity:.7; }

  .note{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:70%; color:#fff; opacity:.92; }
  .time{ color:#d8d8dd; opacity:.9; }

  /* ====== CONTROLS ====== */
  .controls{ position:absolute; inset:auto auto calc(var(--gutter)) var(--gutter); display:flex; gap:8px; background:#0d0e10cc; padding:8px 10px; border:1px solid #2a2b30; border-radius:10px; backdrop-filter: blur(6px); }
  .controls input[type="file"]{ display:none; }
  .btn, .seg{ font:600 12px var(--ui); letter-spacing:.04em; color:#e9e9ed; background:#1a1b1f; border:1px solid #3a3b42; padding:8px 10px; border-radius:8px; cursor:pointer; }
  .btn:hover{ background:#202128; }
  .seg-group{ display:flex; border:1px solid #3a3b42; border-radius:8px; overflow:hidden; }
  .seg{ border:0; background:transparent; padding:8px 12px; }
  .seg[aria-pressed="true"]{ background:#2a2c33; }
  .tiny{ font:600 11px/1 var(--mono); color:#bfc0c6; margin-left:6px; }

  /* ====== RESPONSIVE ====== */
  @media (max-width: 1080px){
    :root{ --left-w: 44vw; --card-w: 54vw; }
  }
  @media (max-width: 880px){
    .main{ grid-template-columns: 1fr; }
    .backdrop{ inset: var(--left-w) 0 0 0; /* push off initially */ }
    .left{ padding-bottom: 0; }
    .stage{ padding-top: 24px; }
    .controls{ inset:auto var(--gutter) calc(var(--gutter)) auto; }
  }
</style>
</head>
<body>
  <div class="shell">
    <div class="main">
      <!-- LEFT: Brand + Tagline -->
      <aside class="left">
        <div class="brand">
          <div class="glyph" aria-hidden="true">
            <div class="cube"></div>
            <div class="cube"></div>
            <div class="cube"></div>
          </div>
          <div style="font-size:22px;">intoview</div>
        </div>
        <div class="tagline" aria-label="Moments. Movement. Mindfulness.">
          <span>Moments. Movement. Mindfulness.</span>
        </div>
      </aside>

      <!-- RIGHT: Background + Note Card Stage -->
      <section class="stage">
        <div class="backdrop" aria-hidden="true">
          <div class="bg-img" id="bg"></div>
        </div>

        <article class="card" id="card">
          <header class="hdr">
            <div class="label-dim" id="titleLbl">[ Title Goes Here ]</div>
            <div class="coords" id="coordsLbl">[ 40.7644¬∞ N, 73.9235¬∞ W ]</div>
          </header>
          <div class="media" id="media">
            <img id="photo" alt="intoview note" loading="lazy"/>
            <div class="placeholder" id="ph">üì∑</div>
          </div>
          <footer class="ftr">
            <div class="note" id="noteLbl">[ ‚ÄúWrite a note, not a novel.‚Äù ]</div>
            <div class="time" id="timeLbl">[ 2025‚Äë01‚Äë01 11:59:59 PM ]</div>
          </footer>
        </article>

        <!-- Controls (upload, aspect, export) -->
        <form class="controls" onsubmit="return false;">
          <label class="btn" for="file">Upload</label>
          <input id="file" type="file" accept="image/*"/>

          <div class="seg-group" role="group" aria-label="Aspect ratio">
            <button class="seg" type="button" id="seg43" aria-pressed="true">4:3</button>
            <button class="seg" type="button" id="seg11" aria-pressed="false">1:1</button>
          </div>

          <button class="btn" id="exportBtn" type="button">Export</button>
          <span class="tiny">PNG, with frame + labels</span>
        </form>
      </section>
    </div>
  </div>

<script>
(() => {
  const $ = (s, r=document) => r.querySelector(s);
  const card = $('#card');
  const media = $('#media');
  const img = $('#photo');
  const ph = $('#ph');
  const bg = $('#bg');
  const titleLbl = $('#titleLbl');
  const noteLbl = $('#noteLbl');
  const coordsLbl = $('#coordsLbl');
  const timeLbl = $('#timeLbl');

  // Seed imagery (placeholder that matches monochrome vibe)
  const seed = 'https://images.unsplash.com/photo-1520697222860-6b23c0d7a9a7?q=80&w=1400&auto=format&fit=crop';
  img.src = seed; bg.style.backgroundImage = `url(${seed})`; ph.style.display = 'none';

  // Timestamp
  const fmtTime = (d=new Date()) => d.toLocaleString([], { year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit' });
  timeLbl.textContent = fmtTime();
  setInterval(() => timeLbl.textContent = fmtTime(), 1000);

  // Geolocation ‚Üí coords label (fallback to mock)
  const setCoords = (lat, lon) => {
    const f = (v) => Number(v).toFixed(4);
    coordsLbl.textContent = `${f(lat)}¬∞ N, ${Math.abs(f(lon))}¬∞ ${lon < 0 ? 'W' : 'E'}`;
  };
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      p => setCoords(p.coords.latitude, p.coords.longitude),
      () => setCoords(40.7644, -73.9235),
      { enableHighAccuracy:false, maximumAge: 600000, timeout: 4000 }
    );
  } else setCoords(40.7644, -73.9235);

  // Upload handling: set <img> + background
  $('#file').addEventListener('change', (e) => {
    const f = e.target.files && e.target.files[0];
    if (!f) return;
    const url = URL.createObjectURL(f);
    img.onload = () => { URL.revokeObjectURL(url); };
    img.src = url; bg.style.backgroundImage = `url(${url})`; ph.style.display = 'none';
  });

  // Aspect ratio toggle
  const seg11 = $('#seg11');
  const seg43 = $('#seg43');
  const press = (el, on) => el.setAttribute('aria-pressed', on ? 'true' : 'false');
  seg11.addEventListener('click', () => { card.classList.add('square'); press(seg11, true); press(seg43, false); });
  seg43.addEventListener('click', () => { card.classList.remove('square'); press(seg11, false); press(seg43, true); });

  // Inline editing (dbl‚Äëclick labels to edit)
  const inlineEdit = (el, placeholder) => {
    el.addEventListener('dblclick', () => {
      const cur = el.textContent.replace(/[\[\]]/g,'').trim();
      const txt = prompt('Edit', cur || placeholder);
      if (txt != null) el.textContent = txt.trim() || placeholder;
    });
  };
  inlineEdit(titleLbl, 'Untitled');
  inlineEdit(noteLbl, 'A quick thought.');

  // Export: rasterize card at device pixel ratio and download
  $('#exportBtn').addEventListener('click', async () => {
    const scale = Math.min(2, window.devicePixelRatio || 1.5); // crisp but light
    const rect = card.getBoundingClientRect();
    const w = Math.round(rect.width * scale);
    const h = Math.round(rect.height * scale);

    // Create a canvas and draw DOM by snapshot
    // Use the Paint API via CSS to get clean vector-ish borders by drawing manually.
    const canvas = document.createElement('canvas');
    canvas.width = w; canvas.height = h; const ctx = canvas.getContext('2d');
    // Fill background
    ctx.fillStyle = '#0b0b0d'; ctx.fillRect(0,0,w,h);

    // Draw photo
    const padTop = Math.round(24 * scale), padBot = Math.round(28 * scale);
    const mediaW = w, mediaH = h - padTop - padBot;
    const tmp = new Image(); tmp.crossOrigin = 'anonymous'; tmp.src = img.src;
    await tmp.decode().catch(()=>{});
    // cover fit
    const rImg = tmp.width / tmp.height; const rBox = mediaW / mediaH;
    let dw = mediaW, dh = mediaH, dx = 0, dy = padTop;
    if (rImg > rBox){ dh = mediaH; dw = dh * rImg; dx = (w - dw)/2; }
    else { dw = mediaW; dh = dw / rImg; dy = padTop + (mediaH - dh)/2; }
    // grayscale
    ctx.filter = 'grayscale(1)';
    ctx.drawImage(tmp, dx, dy, dw, dh);
    ctx.filter = 'none';

    // Frames
    ctx.strokeStyle = '#ffffff'; ctx.lineWidth = Math.max(1, Math.round(scale));
    ctx.strokeRect(0.5*ctx.lineWidth, 0.5*ctx.lineWidth, w-ctx.lineWidth, h-ctx.lineWidth);
    // horizontal rules
    ctx.beginPath(); ctx.moveTo(0, padTop); ctx.lineTo(w, padTop); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(0, h - padBot); ctx.lineTo(w, h - padBot); ctx.stroke();

    // Text: use monospace to match UI
    ctx.fillStyle = '#ffffff';
    ctx.font = `${Math.round(11*scale)}px ${getComputedStyle(document.documentElement).getPropertyValue('--mono') || 'monospace'}`;
    ctx.textBaseline = 'middle';
    ctx.fillText(titleLbl.textContent, Math.round(8*scale), Math.round(padTop/2));
    const coords = coordsLbl.textContent;
    const coordsW = ctx.measureText(coords).width;
    ctx.fillStyle = '#dfe1e7';
    ctx.fillText(coords, w - Math.round(8*scale) - coordsW, Math.round(padTop/2));

    const note = noteLbl.textContent;
    ctx.fillStyle = '#ffffff';
    ctx.fillText(note, Math.round(8*scale), h - Math.round(padBot/2));

    const t = timeLbl.textContent;
    const tW = ctx.measureText(t).width;
    ctx.fillStyle = '#dfe1e7';
    ctx.fillText(t, w - Math.round(8*scale) - tW, h - Math.round(padBot/2));

    // Download
    const a = document.createElement('a');
    a.download = `intoview-note-${Date.now()}.png`;
    a.href = canvas.toDataURL('image/png');
    a.click();
  });
})();
</script>
</body>
</html>

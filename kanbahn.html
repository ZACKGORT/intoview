<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Restaurant Management System</title>
  <script crossorigin="" src="https://unpkg.com/react@18.3.1/umd/react.production.min.js"></script>
  <script crossorigin="" src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://unpkg.com/@react-three/fiber@8.15.12/dist/index.umd.js"></script>
  <script src="https://unpkg.com/@react-three/drei@9.88.17/dist/index.umd.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    :root {
        --primary-color: #2563eb;
        --secondary-color: #7c3aed;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --danger-color: #ef4444;
        --dark-bg: #1e293b;
        --light-bg: #f8fafc;
        --card-bg: #ffffff;
        --text-primary: #1e293b;
        --text-secondary: #64748b;
        --border-color: #e2e8f0;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: var(--text-primary);
        overflow-x: hidden;
    }
    
    #root {
        width: 100%;
        min-height: 100vh;
    }
    
    /* Three.js Background Canvas */
    #three-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.3;
    }
    
    /* Login Screen Styles */
    .login-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
    }
    
    .login-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 40px;
        box-shadow: var(--shadow-lg);
        width: 100%;
        max-width: 400px;
        text-align: center;
    }
    
    .login-title {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 10px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .login-subtitle {
        color: var(--text-secondary);
        margin-bottom: 30px;
        font-size: 14px;
    }
    
    .role-selection {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 20px;
    }
    
    .role-btn {
        padding: 15px 20px;
        border: 2px solid var(--border-color);
        background: white;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .role-btn:hover {
        border-color: var(--primary-color);
        background: var(--light-bg);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    .role-btn i {
        font-size: 18px;
        color: var(--primary-color);
    }
    
    /* Main Application Layout */
    .app-container {
        display: flex;
        height: 100vh;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
    }
    
    .sidebar {
        width: 280px;
        background: var(--dark-bg);
        color: white;
        padding: 30px 20px;
        overflow-y: auto;
        transition: transform 0.3s ease; /* For mobile toggle */
    }
    
    .user-profile {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .user-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 18px;
    }
    
    .user-info h3 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 4px;
    }
    
    .user-info p {
        font-size: 12px;
        opacity: 0.7;
    }
    
    .nav-menu {
        list-style: none;
    }
    
    .nav-item {
        margin-bottom: 8px;
    }
    
    .nav-link {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-size: 14px;
        cursor: pointer;
    }
    
    .nav-link:hover,
    .nav-link.active {
        background: rgba(255, 255, 255, 0.1);
        color: white;
    }
    
    .nav-link i {
        width: 20px;
        text-align: center;
    }
    
    /* Main Content Area */
    .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
    
    .header {
        background: white;
        padding: 20px 30px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .header-title {
        font-size: 24px;
        font-weight: 700;
    }
    
    .header-actions {
        display: flex;
        gap: 15px;
        align-items: center;
    }
    
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .btn-primary {
        background: var(--primary-color);
        color: white;
    }
    
    .btn-primary:hover {
        background: #1d4ed8;
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
    }
    
    .btn-secondary {
        background: white;
        color: var(--text-primary);
        border: 1px solid var(--border-color);
    }
    
    .btn-secondary:hover {
        background: var(--light-bg);
    }
    
    /* Kanban Board Styles */
    .kanban-container {
        flex: 1;
        padding: 30px;
        overflow-x: auto;
        overflow-y: auto;
    }
    
    .kanban-board {
        display: flex;
        gap: 20px;
        min-height: 600px;
    }
    
    .kanban-column {
        flex: 1;
        min-width: 300px;
        background: var(--light-bg);
        border-radius: 12px;
        padding: 20px;
    }
    
    .column-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--border-color);
    }
    
    .column-title {
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .column-count {
        background: var(--border-color);
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
    }
    
    .notes-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
        min-height: 200px;
    }
    
    /* Note Card Styles */
    .note-card {
        background: white;
        border-radius: 12px;
        padding: 16px;
        box-shadow: var(--shadow-sm);
        cursor: move;
        transition: all 0.3s ease;
        border-left: 4px solid var(--primary-color);
    }
    
    .note-card:hover {
        box-shadow: var(--shadow-md);
        transform: translateY(-2px);
    }
    
    .note-card.dragging {
        opacity: 0.5;
        transform: rotate(2deg);
    }
    
    .note-card.urgent {
        border-left-color: var(--danger-color);
    }
    
    .note-card.high {
        border-left-color: var(--warning-color);
    }
    
    .note-card.medium {
        border-left-color: var(--primary-color);
    }
    
    .note-card.low {
        border-left-color: var(--success-color);
    }
    
    .note-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
    }
    
    .note-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
        flex: 1;
    }
    
    .note-priority {
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 10px;
        font-weight: 500;
        text-transform: uppercase;
    }
    
    .priority-urgent {
        background: #fee2e2;
        color: var(--danger-color);
    }
    
    .priority-high {
        background: #fed7aa;
        color: var(--warning-color);
    }
    
    .priority-medium {
        background: #dbeafe;
        color: var(--primary-color);
    }
    
    .priority-low {
        background: #d1fae5;
        color: var(--success-color);
    }
    
    .note-content {
        font-size: 13px;
        color: var(--text-secondary);
        line-height: 1.5;
        margin-bottom: 12px;
    }
    
    .note-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 11px;
        color: var(--text-secondary);
    }
    
    .note-meta {
        display: flex;
        gap: 12px;
    }
    
    .note-meta span {
        display: flex;
        align-items: center;
        gap: 4px;
    }
    
    .note-assignee {
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .assignee-avatar {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 8px;
        font-weight: 600;
        color: white;
    }
    
    /* Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        backdrop-filter: blur(4px);
    }
    
    .modal {
        background: white;
        border-radius: 16px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-lg);
    }
    
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
    }
    
    .modal-title {
        font-size: 20px;
        font-weight: 600;
    }
    
    .modal-close {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        transition: all 0.3s ease;
    }
    
    .modal-close:hover {
        background: var(--light-bg);
        color: var(--text-primary);
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-primary);
    }
    
    .form-input,
    .form-textarea,
    .form-select {
        width: 100%;
        padding: 10px 14px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s ease;
    }
    
    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .form-textarea {
        resize: vertical;
        min-height: 100px;
    }
    
    .form-row {
        display: flex;
        gap: 15px;
    }
    
    .form-row .form-group {
        flex: 1;
    }
    
    .priority-options {
        display: flex;
        gap: 10px;
    }
    
    .priority-option {
        flex: 1;
        padding: 12px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        cursor: pointer;
        text-align: center;
        transition: all 0.3s ease;
        font-size: 13px;
        font-weight: 500;
    }
    
    .priority-option:hover {
        transform: translateY(-2px);
    }
    
    .priority-option.selected {
        color: white;
    }
    
    .priority-option.urgent.selected {
        background: var(--danger-color);
        border-color: var(--danger-color);
    }
    
    .priority-option.high.selected {
        background: var(--warning-color);
        border-color: var(--warning-color);
    }
    
    .priority-option.medium.selected {
        background: var(--primary-color);
        border-color: var(--primary-color);
    }
    
    .priority-option.low.selected {
        background: var(--success-color);
        border-color: var(--success-color);
    }
    
    .form-actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
        margin-top: 25px;
    }
    
    /* Filter Bar Styles */
    .filter-bar {
        background: white;
        padding: 20px 30px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        gap: 15px;
        align-items: center;
    }
    
    .filter-group {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .filter-label {
        font-size: 14px;
        font-weight: 500;
        color: var(--text-secondary);
    }
    
    /* Notification Badge */
    .notification-badge {
        position: relative;
    }
    
    .badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--danger-color);
        color: white;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        font-weight: 600;
    }
    
    /* Mobile Menu Toggle */
    .menu-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-primary);
        cursor: pointer;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
        .app-container {
            flex-direction: column;
        }
    
        .sidebar {
            width: 100%;
            height: auto;
            padding: 20px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            z-index: 10;
        }
    
        .sidebar.open {
            transform: translateX(0);
        }
    
        .kanban-board {
            flex-direction: column;
        }
    
        .kanban-column {
            min-width: 100%;
        }
    
        .modal {
            width: 95%;
            padding: 20px;
        }
    
        .filter-bar {
            flex-direction: column;
            align-items: stretch;
        }
    
        .header {
            padding: 15px 20px;
        }
    
        .kanban-container {
            padding: 20px;
        }
    
        .menu-toggle {
            display: block;
        }
    }
    
    /* Loading and Empty States */
    .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-secondary);
    }
    
    .empty-state i {
        font-size: 48px;
        margin-bottom: 16px;
        opacity: 0.5;
    }
    
    .empty-state p {
        font-size: 14px;
        margin-bottom: 20px;
    }
    
    /* Animation Classes */
    .fade-in {
        animation: fadeIn 0.3s ease-in-out;
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .slide-in {
        animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
        from {
            transform: translateX(-100%);
        }
        to {
            transform: translateX(0);
        }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel" data-presets="react">
    "use strict";

    function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
    function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
    function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
    function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
    function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
    function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
    function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
    function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
    function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
    function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
    function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
    function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
    function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
    function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
    function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
    function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }

    const { useState, useEffect, useRef } = React;

    // Mock User Data
    const mockUsers = [
      { id: 1, name: 'John Smith', role: 'General Manager', initials: 'JS' },
      { id: 2, name: 'Sarah Johnson', role: 'Operations Manager', initials: 'SJ' },
      { id: 3, name: 'Mike Chen', role: 'Kitchen Manager', initials: 'MC' },
      { id: 4, name: 'Emily Davis', role: 'Front of House Manager', initials: 'ED' },
      { id: 5, name: 'Alex Rodriguez', role: 'Bar Manager', initials: 'AR' }
    ];

    // Mock Notes Data
    const mockNotes = [
      { id: 1, title: 'Staff Meeting Tomorrow', content: 'Monthly performance review meeting with all department heads. Please prepare your quarterly reports.', priority: 'high', dueDate: '2024-01-15', dueTime: '10:00', assignee: 1, author: 2, createdAt: '2024-01-14T09:30:00', status: 'todo', category: 'meeting' },
      { id: 2, title: 'New Menu Item Launch', content: 'Testing and finalizing the new seasonal spring menu items. Kitchen needs to finalize recipes.', priority: 'urgent', dueDate: '2024-01-14', dueTime: '15:00', assignee: 3, author: 1, createdAt: '2024-01-14T08:15:00', status: 'inprogress', category: 'menu' },
      { id: 3, title: 'Health Inspection Preparation', content: 'Ensure all areas are inspection-ready. Check cleanliness, food storage, and documentation.', priority: 'high', dueDate: '2024-01-20', dueTime: '09:00', assignee: 4, author: 1, createdAt: '2024-01-13T14:20:00', status: 'todo', category: 'compliance' },
      { id: 4, title: 'Inventory Audit', content: 'Complete weekly inventory audit and submit to accounting. Focus on high-cost items.', priority: 'medium', dueDate: '2024-01-16', dueTime: '12:00', assignee: 5, author: 2, createdAt: '2024-01-14T07:45:00', status: 'completed', category: 'inventory' },
      { id: 5, title: 'Customer Service Training', content: 'Schedule and conduct customer service refresher training for all front-of-house staff.', priority: 'low', dueDate: '2024-01-25', dueTime: '14:00', assignee: 4, author: 1, createdAt: '2024-01-14T11:30:00', status: 'todo', category: 'training' }
    ];

    // Three.js Background Component
    const ThreeBackground = () => {
      const mountRef = useRef(null);
      useEffect(() => {
        if (!mountRef.current) return;
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x000000, 0);
        mountRef.current.appendChild(renderer.domElement);

        // Create floating particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 100;
        const posArray = new Float32Array(particlesCount * 3);
        for (let i = 0; i < particlesCount * 3; i++) {
          posArray[i] = (Math.random() - 0.5) * 10;
        }
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({
          size: 0.05,
          color: 0x667eea,
          transparent: true,
          opacity: 0.8
        });
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        // Create floating geometric shapes
        const geometries = [new THREE.BoxGeometry(0.5, 0.5, 0.5), new THREE.SphereGeometry(0.3, 32, 32), new THREE.TetrahedronGeometry(0.4, 0)];
        const meshes = geometries.map((geometry, index) => {
          const material = new THREE.MeshBasicMaterial({
            color: new THREE.Color(0x764ba2).lerp(new THREE.Color(0x667eea), index / geometries.length),
            wireframe: true,
            transparent: true,
            opacity: 0.3
          });
          const mesh = new THREE.Mesh(geometry, material);
          mesh.position.set((Math.random() - 0.5) * 8, (Math.random() - 0.5) * 6, (Math.random() - 0.5) * 4);
          scene.add(mesh);
          return mesh;
        });
        camera.position.z = 5;

        // Animation loop
        const animate = () => {
          requestAnimationFrame(animate);
          particlesMesh.rotation.y += 0.001;
          particlesMesh.rotation.x += 0.0005;
          meshes.forEach((mesh, index) => {
            mesh.rotation.x += 0.01 * (index + 1);
            mesh.rotation.y += 0.01 * (index + 1);
            mesh.position.y += Math.sin(Date.now() * 0.001 + index) * 0.002;
          });
          renderer.render(scene, camera);
        };
        animate();

        // Handle window resize
        const handleResize = () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        };
        window.addEventListener('resize', handleResize);

        return () => {
          window.removeEventListener('resize', handleResize);
          if (mountRef.current && renderer.domElement) {
            mountRef.current.removeChild(renderer.domElement);
          }
          renderer.dispose();
        };
      }, []);
      return <div ref={mountRef} id="three-canvas" />;
    };

    // Login Component
    const LoginScreen = ({ onLogin }) => {
      const handleRoleSelect = (role) => {
        onLogin(role);
      };
      return (
        <div className="login-container">
          <div className="login-card fade-in">
            <h1 className="login-title">Restaurant Management System</h1>
            <p className="login-subtitle">Select your role to continue</p>
            <div className="role-selection">
              <button className="role-btn" onClick={() => handleRoleSelect(mockUsers[0])}>
                <i className="fas fa-user-tie"></i>
                <div>
                  <div>General Manager</div>
                  <small>Full system access</small>
                </div>
              </button>
              <button className="role-btn" onClick={() => handleRoleSelect(mockUsers[1])}>
                <i className="fas fa-chart-line"></i>
                <div>
                  <div>Operations Manager</div>
                  <small>Operations & staff management</small>
                </div>
              </button>
              <button className="role-btn" onClick={() => handleRoleSelect(mockUsers[2])}>
                <i className="fas fa-utensils"></i>
                <div>
                  <div>Kitchen Manager</div>
                  <small>Kitchen & inventory</small>
                </div>
              </button>
              <button className="role-btn" onClick={() => handleRoleSelect(mockUsers[3])}>
                <i className="fas fa-users"></i>
                <div>
                  <div>Front of House Manager</div>
                  <small>Customer service & dining</small>
                </div>
              </button>
              <button className="role-btn" onClick={() => handleRoleSelect(mockUsers[4])}>
                <i className="fas fa-cocktail"></i>
                <div>
                  <div>Bar Manager</div>
                  <small>Bar operations & beverages</small>
                </div>
              </button>
            </div>
          </div>
        </div>
      );
    };

    // Note Card Component
    const NoteCard = ({ note, onEdit, onDelete, currentUser }) => {
      const [isDragging, setIsDragging] = useState(false);

      const handleDragStart = (e) => {
        setIsDragging(true);
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('noteId', note.id.toString());
      };

      const handleDragEnd = () => {
        setIsDragging(false);
      };

      const formatDate = (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      };

      const formatTime = (timeString) => {
        const [hours, minutes] = timeString.split(':');
        const hour = parseInt(hours);
        const ampm = hour >= 12 ? 'PM' : 'AM';
        const displayHour = hour % 12 || 12;
        return `${displayHour}:${minutes} ${ampm}`;
      };

      const assignee = mockUsers.find(u => u.id === note.assignee);

      return (
        <div
          className={`note-card ${note.priority} ${isDragging ? 'dragging' : ''} fade-in`}
          draggable
          onDragStart={handleDragStart}
          onDragEnd={handleDragEnd}
        >
          <div className="note-header">
            <h4 className="note-title">{note.title}</h4>
            <span className={`note-priority priority-${note.priority}`}>
              {note.priority}
            </span>
          </div>
          <p className="note-content">{note.content}</p>
          <div className="note-footer">
            <div className="note-meta">
              {note.dueDate && (
                <span>
                  <i className="far fa-calendar"></i>
                  {formatDate(note.dueDate)}
                </span>
              )}
              {note.dueTime && (
                <span>
                  <i className="far fa-clock"></i>
                  {formatTime(note.dueTime)}
                </span>
              )}
            </div>
            {assignee && (
              <div className="note-assignee">
                <div className="assignee-avatar">{assignee.initials}</div>
                <span>{assignee.name.split(' ')[0]}</span>
              </div>
            )}
          </div>
        </div>
      );
    };

    // Kanban Column Component
    const KanbanColumn = ({ title, notes, status, onNoteDrop, onEdit, onDelete, currentUser }) => {
      const [isDragOver, setIsDragOver] = useState(false);

      const handleDragOver = (e) => {
        e.preventDefault();
        setIsDragOver(true);
      };

      const handleDragLeave = () => {
        setIsDragOver(false);
      };

      const handleDrop = (e) => {
        e.preventDefault();
        setIsDragOver(false);
        const noteId = parseInt(e.dataTransfer.getData('noteId'));
        onNoteDrop(noteId, status);
      };

      const statusIcons = {
        todo: 'fa-clipboard-list',
        inprogress: 'fa-spinner',
        completed: 'fa-check-circle'
      };

      return (
        <div className={`kanban-column ${isDragOver ? 'drag-over' : ''}`}>
          <div className="column-header">
            <div className="column-title">
              <i className={`fas ${statusIcons[status]}`}></i>
              {title}
            </div>
            <span className="column-count">{notes.length}</span>
          </div>
          <div
            className="notes-list"
            onDragOver={handleDragOver}
            onDragLeave={handleDragLeave}
            onDrop={handleDrop}
          >
            {notes.length === 0 ? (
              <div className="empty-state">
                <i className="fas fa-inbox"></i>
                <p>No items in this column</p>
              </div>
            ) : (
              notes.map(note => (
                <NoteCard
                  key={note.id}
                  note={note}
                  onEdit={onEdit}
                  onDelete={onDelete}
                  currentUser={currentUser}
                />
              ))
            )}
          </div>
        </div>
      );
    };

    // Create Note Modal Component
    const CreateNoteModal = ({ isOpen, onClose, onSave, editingNote, currentUser }) => {
      const [formData, setFormData] = useState({
        title: '',
        content: '',
        priority: 'medium',
        dueDate: '',
        dueTime: '',
        assignee: currentUser.id,
        category: 'general'
      });

      useEffect(() => {
        if (editingNote) {
          setFormData(editingNote);
        } else {
          setFormData({
            title: '',
            content: '',
            priority: 'medium',
            dueDate: '',
            dueTime: '',
            assignee: currentUser.id,
            category: 'general'
          });
        }
      }, [editingNote, currentUser]);

      const handleSubmit = (e) => {
        e.preventDefault();
        onSave(formData);
      };

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const handlePrioritySelect = (priority) => {
        setFormData(prev => ({ ...prev, priority }));
      };

      if (!isOpen) return null;

      return (
        <div className="modal-overlay">
          <div className="modal fade-in">
            <div className="modal-header">
              <h2 className="modal-title">
                {editingNote ? 'Edit Note' : 'Create New Note'}
              </h2>
              <button className="modal-close" onClick={onClose}>
                <i className="fas fa-times"></i>
              </button>
            </div>
            <form onSubmit={handleSubmit}>
              <div className="form-group">
                <label className="form-label">Title</label>
                <input
                  type="text"
                  name="title"
                  className="form-input"
                  value={formData.title}
                  onChange={handleInputChange}
                  placeholder="Enter note title..."
                  required
                />
              </div>
              <div className="form-group">
                <label className="form-label">Content</label>
                <textarea
                  name="content"
                  className="form-textarea"
                  value={formData.content}
                  onChange={handleInputChange}
                  placeholder="Describe the task or message..."
                  required
                />
              </div>
              <div className="form-group">
                <label className="form-label">Priority Level</label>
                <div className="priority-options">
                  <div
                    className={`priority-option urgent ${formData.priority === 'urgent' ? 'selected' : ''}`}
                    onClick={() => handlePrioritySelect('urgent')}
                  >
                    <i className="fas fa-exclamation-circle"></i>
                    <div>Urgent</div>
                  </div>
                  <div
                    className={`priority-option high ${formData.priority === 'high' ? 'selected' : ''}`}
                    onClick={() => handlePrioritySelect('high')}
                  >
                    <i className="fas fa-exclamation-triangle"></i>
                    <div>High</div>
                  </div>
                  <div
                    className={`priority-option medium ${formData.priority === 'medium' ? 'selected' : ''}`}
                    onClick={() => handlePrioritySelect('medium')}
                  >
                    <i className="fas fa-flag"></i>
                    <div>Medium</div>
                  </div>
                  <div
                    className={`priority-option low ${formData.priority === 'low' ? 'selected' : ''}`}
                    onClick={() => handlePrioritySelect('low')}
                  >
                    <i className="fas fa-check"></i>
                    <div>Low</div>
                  </div>
                </div>
              </div>
              <div className="form-row">
                <div className="form-group">
                  <label className="form-label">Due Date</label>
                  <input
                    type="date"
                    name="dueDate"
                    className="form-input"
                    value={formData.dueDate}
                    onChange={handleInputChange}
                  />
                </div>
                <div className="form-group">
                  <label className="form-label">Due Time</label>
                  <input
                    type="time"
                    name="dueTime"
                    className="form-input"
                    value={formData.dueTime}
                    onChange={handleInputChange}
                  />
                </div>
              </div>
              <div className="form-group">
                <label className="form-label">Assign To</label>
                <select
                  name="assignee"
                  className="form-select"
                  value={formData.assignee}
                  onChange={handleInputChange}
                >
                  {mockUsers.map(user => (
                    <option key={user.id} value={user.id}>
                      {user.name} - {user.role}
                    </option>
                  ))}
                </select>
              </div>
              <div className="form-actions">
                <button type="button" className="btn btn-secondary" onClick={onClose}>
                  Cancel
                </button>
                <button type="submit" className="btn btn-primary">
                  <i className="fas fa-save"></i>
                  {editingNote ? 'Update Note' : 'Create Note'}
                </button>
              </div>
            </form>
          </div>
        </div>
      );
    };

    // Main Application Component
    const MainApp = ({ currentUser, onLogout }) => {
      const [notes, setNotes] = useState(mockNotes);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [editingNote, setEditingNote] = useState(null);
      const [activeView, setActiveView] = useState('board');
      const [filterPriority, setFilterPriority] = useState('all');
      const [filterAssignee, setFilterAssignee] = useState('all');
      const [sortBy, setSortBy] = useState('date');
      const [sidebarOpen, setSidebarOpen] = useState(false);

      // Animate sidebar on mobile toggle
      useEffect(() => {
        if (sidebarOpen) {
          gsap.to('.sidebar', { x: 0, duration: 0.3, ease: 'power2.out' });
        } else {
          gsap.to('.sidebar', { x: '-100%', duration: 0.3, ease: 'power2.in' });
        }
      }, [sidebarOpen]);

      const handleCreateNote = () => {
        setEditingNote(null);
        setIsModalOpen(true);
      };

      const handleEditNote = (note) => {
        setEditingNote(note);
        setIsModalOpen(true);
      };

      const handleSaveNote = (noteData) => {
        if (editingNote) {
          setNotes(prev => prev.map(note =>
            note.id === editingNote.id ? { ...note, ...noteData } : note
          ));
        } else {
          const newNote = {
            ...noteData,
            id: Date.now(),
            author: currentUser.id,
            createdAt: new Date().toISOString(),
            status: 'todo'
          };
          setNotes(prev => [...prev, newNote]);
        }
        setIsModalOpen(false);
        setEditingNote(null);
      };

      const handleDeleteNote = (noteId) => {
        if (window.confirm('Are you sure you want to delete this note?')) {
          setNotes(prev => prev.filter(note => note.id !== noteId));
        }
      };

      const handleNoteDrop = (noteId, newStatus) => {
        setNotes(prev => prev.map(note =>
          note.id === noteId ? { ...note, status: newStatus } : note
        ));
      };

      const handleLogout = () => {
        onLogout();
      };

      // Filter and sort notes
      const filteredNotes = notes.filter(note => {
        const priorityMatch = filterPriority === 'all' || note.priority === filterPriority;
        const assigneeMatch = filterAssignee === 'all' || note.assignee.toString() === filterAssignee;
        return priorityMatch && assigneeMatch;
      }).sort((a, b) => {
        switch (sortBy) {
          case 'priority':
            const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3 };
            return priorityOrder[a.priority] - priorityOrder[b.priority];
          case 'date':
            return new Date(b.createdAt) - new Date(a.createdAt);
          case 'dueDate':
            if (!a.dueDate) return 1;
            if (!b.dueDate) return -1;
            return new Date(a.dueDate) - new Date(b.dueDate);
          default:
            return 0;
        }
      });

      // Group notes by status
      const todoNotes = filteredNotes.filter(note => note.status === 'todo');
      const inProgressNotes = filteredNotes.filter(note => note.status === 'inprogress');
      const completedNotes = filteredNotes.filter(note => note.status === 'completed');

      // Animate elements on mount
      useEffect(() => {
        gsap.from('.sidebar', { x: -300, duration: 0.5, ease: 'power2.out' });
        gsap.from('.header', { y: -50, opacity: 0, duration: 0.5, delay: 0.2, ease: 'power2.out' });
        gsap.from('.kanban-column', { 
          y: 30, 
          opacity: 0, 
          duration: 0.5, 
          delay: 0.3, 
          stagger: 0.1,
          ease: 'power2.out'
        });
      }, []);

      return (
        <div className="app-container">
          <div className={`sidebar ${sidebarOpen ? 'open' : ''} slide-in`}>
            <div className="user-profile">
              <div className="user-avatar">{currentUser.initials}</div>
              <div className="user-info">
                <h3>{currentUser.name}</h3>
                <p>{currentUser.role}</p>
              </div>
            </div>
            <nav>
              <ul className="nav-menu">
                <li className="nav-item">
                  <a className="nav-link active" onClick={() => setActiveView('board')}>
                    <i className="fas fa-th-large"></i>
                    Kanban Board
                  </a>
                </li>
                <li className="nav-item">
                  <a className="nav-link" onClick={() => setActiveView('notifications')}>
                    <i className="fas fa-bell"></i>
                    Notifications
                    <span className="notification-badge">
                      <span className="badge">3</span>
                    </span>
                  </a>
                </li>
                <li className="nav-item">
                  <a className="nav-link" onClick={() => setActiveView('team')}>
                    <i className="fas fa-users"></i>
                    Team Members
                  </a>
                </li>
                <li className="nav-item">
                  <a className="nav-link" onClick={() => setActiveView('reports')}>
                    <i className="fas fa-chart-bar"></i>
                    Reports
                  </a>
                </li>
                <li className="nav-item">
                  <a className="nav-link" onClick={() => setActiveView('settings')}>
                    <i className="fas fa-cog"></i>
                    Settings
                  </a>
                </li>
                <li className="nav-item" style={{ marginTop: 'auto' }}>
                  <a className="nav-link" onClick={handleLogout}>
                    <i className="fas fa-sign-out-alt"></i>
                    Logout
                  </a>
                </li>
              </ul>
            </nav>
          </div>

          <div className="main-content">
            <header className="header">
              <button className="menu-toggle" onClick={() => setSidebarOpen(!sidebarOpen)}>
                <i className="fas fa-bars"></i>
              </button>
              <h1 className="header-title">Management Board</h1>
              <div className="header-actions">
                <button className="btn btn-secondary">
                  <i className="fas fa-filter"></i>
                  Filter
                </button>
                <button className="btn btn-primary" onClick={handleCreateNote}>
                  <i className="fas fa-plus"></i>
                  New Note
                </button>
              </div>
            </header>

            <div className="filter-bar">
              <div className="filter-group">
                <label className="filter-label">Priority:</label>
                <select 
                  className="form-select" 
                  style={{ width: '120px' }}
                  value={filterPriority}
                  onChange={(e) => setFilterPriority(e.target.value)}
                >
                  <option value="all">All</option>
                  <option value="urgent">Urgent</option>
                  <option value="high">High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                </select>
              </div>
              <div className="filter-group">
                <label className="filter-label">Assignee:</label>
                <select 
                  className="form-select" 
                  style={{ width: '150px' }}
                  value={filterAssignee}
                  onChange={(e) => setFilterAssignee(e.target.value)}
                >
                  <option value="all">Everyone</option>
                  {mockUsers.map(user => (
                    <option key={user.id} value={user.id}>{user.name}</option>
                  ))}
                </select>
              </div>
              <div className="filter-group">
                <label className="filter-label">Sort by:</label>
                <select 
                  className="form-select" 
                  style={{ width: '120px' }}
                  value={sortBy}
                  onChange={(e) => setSortBy(e.target.value)}
                >
                  <option value="date">Date</option>
                  <option value="priority">Priority</option>
                  <option value="dueDate">Due Date</option>
                </select>
              </div>
            </div>

            <div className="kanban-container">
              <div className="kanban-board">
                <KanbanColumn
                  title="To Do"
                  notes={todoNotes}
                  status="todo"
                  onNoteDrop={handleNoteDrop}
                  onEdit={handleEditNote}
                  onDelete={handleDeleteNote}
                  currentUser={currentUser}
                />
                <KanbanColumn
                  title="In Progress"
                  notes={inProgressNotes}
                  status="inprogress"
                  onNoteDrop={handleNoteDrop}
                  onEdit={handleEditNote}
                  onDelete={handleDeleteNote}
                  currentUser={currentUser}
                />
                <KanbanColumn
                  title="Completed"
                  notes={completedNotes}
                  status="completed"
                  onNoteDrop={handleNoteDrop}
                  onEdit={handleEditNote}
                  onDelete={handleDeleteNote}
                  currentUser={currentUser}
                />
              </div>
            </div>
          </div>

          <CreateNoteModal
            isOpen={isModalOpen}
            onClose={() => setIsModalOpen(false)}
            onSave={handleSaveNote}
            editingNote={editingNote}
            currentUser={currentUser}
          />
        </div>
      );
    };

    // Main App Component
    const App = () => {
      const [currentUser, setCurrentUser] = useState(null);

      const handleLogin = (user) => {
        setCurrentUser(user);
      };

      const handleLogout = () => {
        setCurrentUser(null);
      };

      return (
        <>
          <ThreeBackground />
          {!currentUser ? (
            <LoginScreen onLogin={handleLogin} />
          ) : (
            <MainApp currentUser={currentUser} onLogout={handleLogout} />
          )}
        </>
      );
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    // Initialize GSAP animations after component mount
    setTimeout(() => {
      gsap.from('.login-card', {
        scale: 0.8,
        opacity: 0,
        duration: 0.5,
        ease: 'back.out(1.7)'
      });

      gsap.from('.role-btn', {
        y: 20,
        opacity: 0,
        duration: 0.3,
        stagger: 0.1,
        delay: 0.3,
        ease: 'power2.out'
      });
    }, 100);
  </script>
</body>
</html>
